
###########################################################
New Step
###########################################################
prompt_log: Sample Prompt:
Example_1:
input: ['.', 'i', 'i', 'i', '.', '.', 'h', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']
output: ['.', 'i', 'i', 'i', '.', 'h', 'h', 'h', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']

Example_2:
input: ['.', '.', 'h', 'h', 'h', '.', '.', '.', 'i', '.', '.', '.', '.', 'i', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']
output: ['.', '.', 'h', 'h', 'h', '.', '.', 'i', 'i', 'i', '.', '.', 'i', 'i', 'i', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']

Example_3:
input: ['.', '.', 'c', 'c', 'c', '.', '.', 'e', '.', '.', '.', '.', '.', 'e', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']
output: ['.', '.', 'c', 'c', 'c', '.', 'e', 'e', 'e', '.', '.', '.', 'e', 'e', 'e', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']

Test case:
input: ['.', 'h', 'h', 'h', '.', '.', 'h', '.', '.', '.', 'e', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']

###########################################################
Sample Outputs:
output: ['.', 'h', 'h', 'h', '.', '.', 'h', '.', '.', '.', 'e', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']
```

Comment: What is the expected output for `[., h, h, h,.,, h,.,.,., e,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.]`?

Comment: @גלעדברקן The expected output should be the same as input. I added it to my question. Thanks!

## Answer (0)

You can use a regular expression with lookahead and backreference:

```
import re

def replace(s):
    return re.sub('([ih])(?=.*\1)', r'\1\1', s)

print(replace('.iiiii..hhh.........h...e............')) # =>.iii..hhh.........hhe.........
```

Demo on regex101

The pattern matches any character in the set `{i, h}` followed by zero or more characters of any kind that are then followed by the same character again. It replaces this match with two instances of the matched character.

Comment: Thank you very much Nick! This works perfectly fine. Could you please explain how does your code work?

Comment: Sure - see updated answer. Let me know if anything's unclear.


###########################################################
Result:
solution: ['.', 'h', 'h', 'h', '.', 'h', 'h', 'h', '.', 'e', 'e', 'e', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.']

success: 0

too_long_prompt: False

tries: 1

success_rate: 0.2042360060514372

cat_success_cnt: 1

cat_success_rate: 0.09090909090909091

